/* eslint-disable comma-spacing, key-spacing, object-curly-spacing */
const { model, Schema } = require("mongoose");
const createMongooseSchema = require("{{json_schema_module}}").default;

const data = require("./{{name}}.schema.json");
data.properties._id = { "type": "string" };
const convertedSchema = createMongooseSchema(data.properties, data);
const schema = new Schema(convertedSchema);
const collection = `${data.metadata.namespace || "default"}.${data.metadata.collection}`;

const model_obj = model("{{ name }}", schema, collection);
module.exports = model_obj;
