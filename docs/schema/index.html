<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/joyce/blog/rss.xml" title="Joyce Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/joyce/blog/atom.xml" title="Joyce Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-56700273-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">What is a schema? | Joyce</title><meta data-react-helmet="true" property="og:url" content="https://sourcesense.github.io/joyce/docs/schema"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="What is a schema? | Joyce"><meta data-react-helmet="true" name="description" content="A schema is first of all a json-schema."><meta data-react-helmet="true" property="og:description" content="A schema is first of all a json-schema."><link data-react-helmet="true" rel="shortcut icon" href="/joyce/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sourcesense.github.io/joyce/docs/schema"><link data-react-helmet="true" rel="alternate" href="https://sourcesense.github.io/joyce/docs/schema" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://sourcesense.github.io/joyce/docs/schema" hreflang="x-default"><link rel="stylesheet" href="/joyce/assets/css/styles.ddb7cf01.css">
<link rel="preload" href="/joyce/assets/js/runtime~main.151d7b5b.js" as="script">
<link rel="preload" href="/joyce/assets/js/main.d9cd8811.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/joyce/"><img src="/joyce/img/logo-art-black.png" alt="Joyce" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/joyce/img/logo-art-black.png" alt="Joyce" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Joyce</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/joyce/docs/overview">Documentation</a><a class="navbar__item navbar__link" href="/joyce/getting-started">Getting Started</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sourcesense/joyce" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/joyce/"><img src="/joyce/img/logo-art-black.png" alt="Joyce" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/joyce/img/logo-art-black.png" alt="Joyce" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Joyce</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/joyce/docs/overview">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/getting-started">Getting Started</a></li><li class="menu__list-item"><a href="https://github.com/sourcesense/joyce" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/architecture">Architecture</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/joyce/docs/schema">Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/import-gateway">Import Gateway</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/connectors">Connectors</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/sink">Mongodb Sink</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/rest">Joyce API</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/event-messaging">Event Messaging</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/joyce-uris">Joyce URIs</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/Extending">Extending</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/Changelog">Changelog</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/joyce/docs/contribute">Contribute</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">What is a schema?</h1></header><div class="markdown"><p>A schema is first of all a <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">json-schema</a>.<br>
It represent how you want your content to be shaped, it represent a single entity with properties and property types, if you are familiar with Swagger, the syntax it&#x27;s the same (swagger files are json-schema too).  </p><p>What Joyce adds, are <strong>keywords</strong> (prepended with a <code>$</code> sign) in properties definition, that drive how to <strong>tranform</strong> the source into the described content.   </p><p>In this way a Schema is a DSL that describe an <em>entity</em> and how to trasform a source in this <em>entity</em>.</p><p>Let&#x27;s see an example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//joyce.sourcesensce.com/v1/schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">$metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> user</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A test schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">subtype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> import</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">uid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> users</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">development</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> clients</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">store</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">indexes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> object</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">$path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.user_id&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">full_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">$path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.first_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot; &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.last_name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">$fixed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SimpleUser&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">$meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.collection&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Applying this schema to the following source content:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;user_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1337&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;first_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Jon&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;last_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Snow&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jon@winterfell.cold&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;state&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Westeros&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Will result in this transformed content:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1337</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;full_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Jon Snow&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jon@winterfell.cold&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;kind&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SimpleUser&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s dissect the schema.  </p><p>The <code>$schema</code> node is part of the json-schema specification.<br>
<code>$metadata</code> node stores information used during all the flows of the content.  See <a href="#metadata">$metadata</a></p><p>Then starts a standard json-schema object that descibe our desired content, the keys <code>$path</code> and <code>$fixed</code> are joyce specific nodes that tells the schema engine how to precess the source.  </p><p>Those key are tied to built-in <a href="#handlers">Handlers</a>, that implements a logic. You can <a href="/joyce/docs/extending">extend the Schema DSL</a> defining your own.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-it-works"></a>How it works<a class="hash-link" href="#how-it-works" title="Direct link to heading">#</a></h2><p>The engine that process the schema takes as in put a schema and a source json and output a transofrmed json.<br>
It iterates through properties of the schema and for each one of them:</p><ul><li>if it finds an Handler&#x27;s key, applies the handler and put the result as the value of the property (<em>code</em>, <em>full_name</em>, <em>kind</em>)</li><li>if it does not find an Handler&#x27;s key, tries to get the value from the source json with the same key. (<em>email</em>)</li></ul><p>It does it cascading for nodes of <code>array</code> and <code>object</code> types.<br>
Tries to convert types autonomously (<em>code</em>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="namespace"></a>Namespace<a class="hash-link" href="#namespace" title="Direct link to heading">#</a></h2><p>A schema is characterized by a namespace, a namespace is expressed with dot notation, like a package ( <code>clients.automotive.ford</code> ). The namespace is used as a prefix for the name that identifies a schema, as well for the collection where the content will be saved.</p><p>A schema with this metadata: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> italian</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">car</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cars</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> clients.automotive.ford</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">subtype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> import</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>will be saved with this uid <code>joyce://schema/import/clients.automotive.ford.italian-car</code> and will generate contents with uids like <code>joyce://content/import/clients.automotive.ford.cars/&lt;UID&gt;</code> that will get saved in collection <code>clients.automotive.ford.cars</code>.</p><p>Namespace will give you a way to organize schemas in a hierarchical way.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="schema-inheritance"></a>Schema Inheritance<a class="hash-link" href="#schema-inheritance" title="Direct link to heading">#</a></h2><p>You can define a schema to have a parent schema:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">child</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A test child schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">subtype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> import</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> joyce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//schema/import/user</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The schema having a parent schema, will have those metadata values overriden (they are no longer required in the child schema):</p><ul><li>namespace</li><li>collection</li><li>uid</li></ul><p>The processed content is validated not only against the child schema but also against the parent.</p><p>This is useful when you have content coming from different import sources that is in different shapes, so you need different schemas to transform it, but you want as anoutput the same entity and store it together in a common collection.<br>
See this <a href="/joyce/tutorial-accomodations">Tutorial</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="connectors"></a>Connectors<a class="hash-link" href="#connectors" title="Direct link to heading">#</a></h2><p>From version 1.2.0 of the import-gateway, you can specify kafka connectors configuration inside the schema to manage with a unique declarative object the whole import pipeline.</p><p>This is done within the <code>extra</code> node of metadata. See <a href="#extraconnectors">extra.connectors</a> to learn how to configure them.</p><p><code>import-gateway</code> based on these connectors configuration, will manage directly the connector by invoking Kafka Connect REST API to create update and delete connectors as specified inside the schema.</p><p>It will apply (if not specofied) a transofrmation to build correctly the kafka message key to process the message.</p><p>In addition <code>import-gateway</code> expose <a href="/joyce/docs/import-gateway#connectors-api">additional API</a> on the schema resource to restart, pause and resume the connector configured.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">extra:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    connectors:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: &quot;news-sourcenews-connect&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        config:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          connector.class: &quot;org.kaliy.kafka.connect.rss.RssSourceConnector&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          rss.urls: &quot;https://news.sourcesense.com/rss&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          topic: &quot;joyce_import&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="metadata"></a>Metadata<a class="hash-link" href="#metadata" title="Direct link to heading">#</a></h2><p>The <code>$metadata</code> node is one of the enhancement that Joyce adds, it stores metadata information that will be used during all the flow of the content.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="name"></a>name<a class="hash-link" href="#name" title="Direct link to heading">#</a></h3><p><em>(required)</em><br>
Is the name of the schema, along with the namespace and subtype, identifies univocally the schema inside the system. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="subtype"></a>subtype<a class="hash-link" href="#subtype" title="Direct link to heading">#</a></h3><p><em>(required)</em><br>
Indicates the type of the schema. It participates in the creation of the <a href="/joyce/docs/joyce-uris">Joyce URI</a> of the schema.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="namespace-1"></a>namespace<a class="hash-link" href="#namespace-1" title="Direct link to heading">#</a></h3><p><em>[default: default]</em><br>
Organize and  group schema in a hierarchical way, it is defined with  a package like dot notation (like java packages). </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="description"></a>description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h3><p>Is just an optional description of the schema.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="uid"></a>uid<a class="hash-link" href="#uid" title="Direct link to heading">#</a></h3><p><em>(required)</em><br>
Tells which key of the defined entity is to be used as Unique Identifier of the content.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="collection"></a>collection<a class="hash-link" href="#collection" title="Direct link to heading">#</a></h3><p><em>(required)</em><br>
Is the name of the collection (prefixed by teh namespace) in which the produced content will be stored.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="store"></a>store<a class="hash-link" href="#store" title="Direct link to heading">#</a></h3><p><em>[default: true]</em><br>
If <strong>false</strong> content generated from this schema is published to the <code>joyce_content</code> topic but not stored by the Sink</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="indexes"></a>indexes<a class="hash-link" href="#indexes" title="Direct link to heading">#</a></h3><p><em>[default: []]</em><br>
A list of <code>Map&lt;String,Int&gt;</code> that defines indexes to be created by the sink in the content collection.</p><p>ie. the following configuration created an index on field <strong>section</strong> DESC, and a composite index on fields <strong>section DESC</strong>, <strong>published_date ASC</strong>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">indexes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">section</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">section</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">published_date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="development"></a>development<a class="hash-link" href="#development" title="Direct link to heading">#</a></h3><p><em>(default false)</em><br>
If true mark the schema as a development schema and saving the schema changed will skip [versioning controls].(import-gateway#versioning)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parent"></a>parent<a class="hash-link" href="#parent" title="Direct link to heading">#</a></h3><p>If specified it must be a valid Schema <a href="/joyce/docs/joyce-uris">Joyce URI</a>.<br>
See <a href="#schema-inheritance">Schema Inheritance</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extra"></a>extra<a class="hash-link" href="#extra" title="Direct link to heading">#</a></h3><p><em>(default {})</em><br>
This node has extra features that are specific for the type of schema.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extrafilter"></a>extra.filter<a class="hash-link" href="#extrafilter" title="Direct link to heading">#</a></h3><p>From version <code>1.3</code> you can enter a <a href="https://jsonlogic.com/" target="_blank" rel="noopener noreferrer">JSON Logic</a> expression that will filter content to be imported with this schema. If the expression evaluate to false the content get skipped.<br>
It is useful when a  connector produce a lota of data that we don&#x27;t want to get processed.<br>
See <a href="https://jsonlogic.com/operations.html" target="_blank" rel="noopener noreferrer">JSON logic docs</a> know how to express the filter. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extraconnectors"></a>extra.connectors<a class="hash-link" href="#extraconnectors" title="Direct link to heading">#</a></h3><p><em>(default {})</em>  </p><p>This node is an array of connectors configuration, these connectors are automatically configured to build a suitable key (<a href="/joyce/docs/connectors">see Connectors section</a> for more info) to use the schema we are working on.</p><p>a connectors element is like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> techcrunch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">news   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the name that will be used to create the effective connector on Kafka Connect</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">importKeyUid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> link      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the field that will be used as unique id in the messages produced by the connector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Kafka connect specfic configurations</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">connector.class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;org.kaliy.kafka.connect.rss.RssSourceConnector&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">rss.urls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://feeds.feedburner.com/Techcrunch&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="handlers"></a>Handlers<a class="hash-link" href="#handlers" title="Direct link to heading">#</a></h2><p>In order transform the content from the source json to what gets publicated to kafka and then stored and served, you use <code>schema handlers</code> by defining in the schema how to populate de properties of your final document.</p><p>These are the built-in handlers.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="path"></a>$path<a class="hash-link" href="#path" title="Direct link to heading">#</a></h3><p>Use it&#x27;s value as a <code>json-path</code> expression, the underlying implementation is <a href="https://github.com/json-path/JsonPath" target="_blank" rel="noopener noreferrer">Jayway JsonPath</a> so it&#x27;s full semantic is supported.</p><p>The exprassion is evaluated and the result returned.</p><p>If it&#x27;s value is an array, every item of the array that starts with a json-path expression (<code>$</code> sign) is evalueted and joined with the other that are not.</p><p>As an add on feature you can specify a default value just inside the json-path expression in this way <code>$.some.path ?? DEFAULT_VALUE</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="meta"></a>$meta<a class="hash-link" href="#meta" title="Direct link to heading">#</a></h3><p>It&#x27;s the same as <code>$path</code> handler but the json-path expression is applied to the <code>$metadata</code> node instead of the source json.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fixed"></a>$fixed<a class="hash-link" href="#fixed" title="Direct link to heading">#</a></h3><p>It simply use it&#x27;s value as the value to return.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="script"></a>$script<a class="hash-link" href="#script" title="Direct link to heading">#</a></h3><p>This handler will let you write a small script that has access to the orignal source, context and schema metadata to produce a value for the field where it is used.
It is not intended to run complex programs but small scripts to manipulate teh source content.</p><p>The code specified will get wrapped inside a function to wchich  are passed 3 object:</p><ul><li>a dict/map object representing the source json</li><li>a dict/map object representing the schema metadata</li><li>a generic context object that will vary in its content by  the handlers used before.</li></ul><p>the function  in python  is something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wrapper</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This handler is configured with this parameters:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h4><ul><li><code>language</code><br>the language used by the script, at the moment you can  use these 3 engines: <strong>python</strong>, <strong>javascript</strong> and <strong>groovy</strong>.</li><li><code>online</code><br><strong>[default: true]</strong> Whether the script is a oneliner or multiline. If it is a multiline script <strong>YOU MUST write a return statement</strong>. The return value is implicit if you use online script.</li><li><code>code</code><br>The code of the script.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">language</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> python</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">oneLine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token scalar string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">    asd = source[&#x27;object&#x27;][&#x27;objectField&#x27;].upper()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">    return {&#x27;field1&#x27;: asd, &#x27;field2&#x27;: &#x27;newField&#x27;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rest"></a>$rest<a class="hash-link" href="#rest" title="Direct link to heading">#</a></h3><p>With this handler you can populate a schema property value with the result of an http call.<br>
You can control pretty much everything of the http call: Method, Headers, Body and Url parameters.</p><p>There is a special config <code>vars</code> where you can define variables that you can use in the aformentioned fields values (headers, url, body).<br>
These variables can be populated with a <code>josn-path</code> expression executed on the source data.  </p><p>In request construction fields <code>url</code>, <code>headers</code>, <code>body</code> you can use the variables using a <a href="https://mustache.github.io/mustache.5.html" target="_blank" rel="noopener noreferrer">Mustache</a> template syntax.</p><p>To return what you are interested from the http response, you can use the config <code>extract</code> that is a <code>json-path</code> expressione executed on the result of the http call.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The handler expects the http call to return json.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration-1"></a>Configuration<a class="hash-link" href="#configuration-1" title="Direct link to heading">#</a></h4><ul><li><code>url</code><br>The url to call, include here url get parameters as you wish, in every part of the url you can use a variable.<br>(ie. <code>http://example.com/api/{{resource}}?startfrom={{date}}</code>).</li><li><code>method</code><br>The http method, GET, POST, ...</li><li><code>headers</code><br>A map of headers to include in the request. You can use variables in teh value of the request</li><li><code>vars</code><br>A map of vars that you can use as variables in other field, the value of every key is a <code>json-path</code> expression to extract fields from the source.</li><li><code>extract</code><br>The <code>json-path</code> expression used to extract the result</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples"></a>examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$rest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://example.com/api/users?email={{email}}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> GET</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">Content-Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> application/json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.user_email&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">extract</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.data&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">$rest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://example.com/api/search&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> POST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">Content-Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> application/json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">Authorization</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Bearer </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token scalar string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">      &quot;user&quot;: &quot;{{username}}&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">      &quot;search&quot;: &quot;simple&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">    }</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.user.token&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.user.name&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">extract</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.result&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/sourcesense/joyce/edit/main/docs/docs/30-schema.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/joyce/docs/architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Architecture</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/joyce/docs/import-gateway"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Import Gateway Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-it-works" class="table-of-contents__link">How it works</a></li><li><a href="#namespace" class="table-of-contents__link">Namespace</a></li><li><a href="#schema-inheritance" class="table-of-contents__link">Schema Inheritance</a></li><li><a href="#connectors" class="table-of-contents__link">Connectors</a></li><li><a href="#metadata" class="table-of-contents__link">Metadata</a><ul><li><a href="#name" class="table-of-contents__link">name</a></li><li><a href="#subtype" class="table-of-contents__link">subtype</a></li><li><a href="#namespace-1" class="table-of-contents__link">namespace</a></li><li><a href="#description" class="table-of-contents__link">description</a></li><li><a href="#uid" class="table-of-contents__link">uid</a></li><li><a href="#collection" class="table-of-contents__link">collection</a></li><li><a href="#store" class="table-of-contents__link">store</a></li><li><a href="#indexes" class="table-of-contents__link">indexes</a></li><li><a href="#development" class="table-of-contents__link">development</a></li><li><a href="#parent" class="table-of-contents__link">parent</a></li><li><a href="#extra" class="table-of-contents__link">extra</a></li><li><a href="#extrafilter" class="table-of-contents__link">extra.filter</a></li><li><a href="#extraconnectors" class="table-of-contents__link">extra.connectors</a></li></ul></li><li><a href="#handlers" class="table-of-contents__link">Handlers</a><ul><li><a href="#path" class="table-of-contents__link">$path</a></li><li><a href="#meta" class="table-of-contents__link">$meta</a></li><li><a href="#fixed" class="table-of-contents__link">$fixed</a></li><li><a href="#script" class="table-of-contents__link">$script</a></li><li><a href="#rest" class="table-of-contents__link">$rest</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/sourcesense/joyce" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://sourcesense.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sourcesense</a></li><li class="footer__item"><a href="https://github.com/sourcesense/joyce" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Sourcesense Spa. Built with Docusaurus.</div></div></div></footer></div>
<script src="/joyce/assets/js/runtime~main.151d7b5b.js"></script>
<script src="/joyce/assets/js/main.d9cd8811.js"></script>
</body>
</html>